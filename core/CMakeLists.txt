cmake_minimum_required(VERSION 2.8)

gluon_include_directories( GluonCore
    ${QT_INCLUDES}
)

include_directories( ${CMAKE_CURRENT_SOURCE_DIR}/gdl )

if( BUILD_EXAMPLES)
    add_subdirectory( examples )
endif()

set(GluonCore_SRCS
    axisalignedbox.cpp
    directoryprovider.cpp
    debughelper.cpp
    gluonobject.cpp
    gluonobjectfactory.cpp
    messagehandler.cpp
    metainfo.cpp
    referencecounter.cpp
    scriptengine.cpp
    gdlserializer.cpp

    bindings/com_trolltech_qt_gui_init.cpp
    bindings/qtscript_QColor.cpp
    bindings/qtscript_QSizeF.cpp
    bindings/qtscript_QQuaternion.cpp
    bindings/qtscript_QVector2D.cpp
    bindings/qtscript_QVector3D.cpp
    bindings/qtscript_QVector4D.cpp

    gdl/gdllexer.cpp
    gdl/gdlparser.cpp
    gdl/gdlvisitor.cpp
    gdl/gdldefaultvisitor.cpp
    gdl/objecttreebuilder.cpp
    gdl/writer.cpp
)

set(GluonCore_HEADERS
    axisalignedbox.h
    debughelper.h
    gluoncore_export.h
    gluonobject.h
    gluonobjectfactory.h
    gluonvarianttypes.h
    messagehandler.h
    metainfo.h
    referencecounter.h
    scriptengine.h
    singleton.h
    gdlserializer.h
)

gluon_add_library(GluonCore SHARED 
    "${GluonCore_SRCS}"
    "${GluonCore_HEADERS}"
    ${QT_QTCORE_LIBRARY} ${QT_QTGUI_LIBRARY} ${QT_QTSCRIPT_LIBRARY}
)

if(BUILD_TESTS)
    add_subdirectory(tests)
endif()
